import{r as a,j as s,L as x,A as b}from"./index-G8dAaOpg.js";import{u as p}from"./usePageStyle-CtML4cOJ.js";const f=()=>{p("/css/login.css");const[n,g]=a.useState(""),[r,c]=a.useState(!1),[w,d]=a.useState(null),[i,t]=a.useState(null),[l,m]=a.useState(null),h=async o=>{o.preventDefault(),c(!0),d(null),t(null),m(null);try{const e=await b.resetPassword(n);if(e.success){const u=e.new_password||e.data&&e.data.new_password;u?(m(u),d("Password reset successful!")):t("Password reset indicated success, but no password was returned.")}}catch(e){t(e.message||"Failed to reset password. User may not exist.")}finally{c(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx("img",{src:"/images/background.jpg",alt:"Background",className:"logo"}),s.jsxs("div",{className:"login-card",id:"loginCard",children:[s.jsxs("div",{className:"login-header",children:[s.jsx("img",{src:"/images/tcc-logo.png",alt:"TCC Logo",className:"school-logo"}),s.jsx("h2",{className:"mb-2",children:"Talisay City College"})]}),s.jsx("h3",{className:"mb-3",children:"Reset Password"}),s.jsx("form",{onSubmit:h,children:l?s.jsxs("div",{className:"text-center mt-4 fade-in",children:[s.jsx("div",{className:"mb-4",children:s.jsx("i",{className:"bi bi-check-circle-fill text-success",style:{fontSize:"3rem"}})}),s.jsx("h4",{className:"mb-3 fw-bold",children:"Password Reset Successful"}),s.jsx("p",{className:"text-muted mb-3",children:"Your password has been reset. Please use the following temporary password to log in:"}),s.jsxs("div",{className:"password-display mb-4 p-3 rounded",style:{background:"#f8f9fa",border:"2px dashed #dee2e6",position:"relative"},children:[s.jsx("code",{className:"fs-2 fw-bold text-dark d-block",children:l}),s.jsxs("small",{className:"text-muted d-block mt-2",children:[s.jsx("i",{className:"bi bi-clipboard me-1"})," Copy this password"]})]}),s.jsx("div",{className:"d-grid gap-2",children:s.jsx(x,{to:"/",className:"btn btn-primary btn-lg",children:"Back to Login"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"alert alert-info mb-3",children:s.jsx("p",{className:"mb-2",children:"Enter your username below. The system will generate a new random password for you to log in with."})}),i&&s.jsx("div",{className:"alert alert-danger mb-3",children:i}),s.jsxs("div",{className:"form-group mb-3",children:[s.jsx("label",{className:"form-label",children:"Username"}),s.jsx("input",{type:"text",className:"form-control",placeholder:"Enter your username",value:n,onChange:o=>g(o.target.value),disabled:r,required:!0})]}),s.jsx("button",{type:"submit",className:"btn btn-primary w-100 mb-3",disabled:r,children:r?"Processing...":"Generate New Password"})]})}),!l&&s.jsx("div",{className:"text-center mt-3",children:s.jsx(x,{to:"/",className:"text-muted text-decoration-none",children:"Back to Login"})})]})]})};export{f as default};
